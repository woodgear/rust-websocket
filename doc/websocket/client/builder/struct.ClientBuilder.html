<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `ClientBuilder` struct in crate `websocket`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, ClientBuilder">

    <title>websocket::client::builder::ClientBuilder - Rust</title>

    <link rel="stylesheet" type="text/css" href="../../../normalize.css">
    <link rel="stylesheet" type="text/css" href="../../../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../../../main.css">
    

    
    
</head>
<body class="rustdoc struct">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        <div class="sidebar-menu">&#9776;</div>
        
        <p class='location'>Struct ClientBuilder</p><div class="sidebar-elems"><div class="block items"><a class="sidebar-title" href="#methods">Methods</a><div class="sidebar-links"><a href="#method.from_url">from_url</a><a href="#method.new">new</a><a href="#method.add_protocol">add_protocol</a><a href="#method.add_protocols">add_protocols</a><a href="#method.clear_protocols">clear_protocols</a><a href="#method.add_extension">add_extension</a><a href="#method.add_extensions">add_extensions</a><a href="#method.clear_extensions">clear_extensions</a><a href="#method.key">key</a><a href="#method.clear_key">clear_key</a><a href="#method.version">version</a><a href="#method.clear_version">clear_version</a><a href="#method.origin">origin</a><a href="#method.clear_origin">clear_origin</a><a href="#method.custom_headers">custom_headers</a><a href="#method.clear_header">clear_header</a><a href="#method.get_header">get_header</a><a href="#method.connect">connect</a><a href="#method.connect_insecure">connect_insecure</a><a href="#method.connect_secure">connect_secure</a><a href="#method.connect_on">connect_on</a><a href="#method.async_connect">async_connect</a><a href="#method.async_connect_secure">async_connect_secure</a><a href="#method.async_connect_insecure">async_connect_insecure</a><a href="#method.async_connect_on">async_connect_on</a></div><a class="sidebar-title" href="#implementations">Trait Implementations</a><div class="sidebar-links"><a href="#impl-Clone">Clone</a><a href="#impl-Debug">Debug</a></div></div><p class='location'><a href='../../index.html'>websocket</a>::<wbr><a href='../index.html'>client</a>::<wbr><a href='index.html'>builder</a></p><script>window.sidebarCurrent = {name: 'ClientBuilder', ty: 'struct', relpath: ''};</script><script defer src="sidebar-items.js"></script></div>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content">
<h1 class='fqn'><span class='in-band'>Struct <a href='../../index.html'>websocket</a>::<wbr><a href='../index.html'>client</a>::<wbr><a href='index.html'>builder</a>::<wbr><a class="struct" href=''>ClientBuilder</a></span><span class='out-of-band'><span id='render-detail'>
                   <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                       [<span class='inner'>&#x2212;</span>]
                   </a>
               </span><a class='srclink' href='../../../src/websocket/client/builder.rs.html#104-110' title='goto source code'>[src]</a></span></h1>
<pre class='rust struct'>pub struct ClientBuilder&lt;'u&gt; { /* fields omitted */ }</pre><div class='docblock'><p>Build clients with a builder-style API
This makes it easy to create and configure a websocket
connection:</p>

<p>The easiest way to connect is like this:</p>

<pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">websocket</span>::<span class="ident">ClientBuilder</span>;

<span class="kw">let</span> <span class="ident">client</span> <span class="op">=</span> <span class="ident">ClientBuilder</span>::<span class="ident">new</span>(<span class="string">&quot;ws://myapp.com&quot;</span>)
    .<span class="ident">unwrap</span>()
    .<span class="ident">connect_insecure</span>()
    .<span class="ident">unwrap</span>();</pre>

<p>But there are so many more possibilities:</p>

<pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">websocket</span>::<span class="ident">ClientBuilder</span>;
<span class="kw">use</span> <span class="ident">websocket</span>::<span class="ident">header</span>::{<span class="ident">Headers</span>, <span class="ident">Cookie</span>};

<span class="kw">let</span> <span class="ident">default_protos</span> <span class="op">=</span> <span class="macro">vec</span><span class="macro">!</span>[<span class="string">&quot;ping&quot;</span>, <span class="string">&quot;chat&quot;</span>];
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">my_headers</span> <span class="op">=</span> <span class="ident">Headers</span>::<span class="ident">new</span>();
<span class="ident">my_headers</span>.<span class="ident">set</span>(<span class="ident">Cookie</span>(<span class="macro">vec</span><span class="macro">!</span>[<span class="string">&quot;userid=1&quot;</span>.<span class="ident">to_owned</span>()]));

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">builder</span> <span class="op">=</span> <span class="ident">ClientBuilder</span>::<span class="ident">new</span>(<span class="string">&quot;ws://myapp.com/room/discussion&quot;</span>)
    .<span class="ident">unwrap</span>()
    .<span class="ident">add_protocols</span>(<span class="ident">default_protos</span>) <span class="comment">// any IntoIterator</span>
    .<span class="ident">add_protocol</span>(<span class="string">&quot;video-chat&quot;</span>)
    .<span class="ident">custom_headers</span>(<span class="kw-2">&amp;</span><span class="ident">my_headers</span>);

<span class="comment">// connect to a chat server with a user</span>
<span class="kw">let</span> <span class="ident">client</span> <span class="op">=</span> <span class="ident">builder</span>.<span class="ident">connect_insecure</span>().<span class="ident">unwrap</span>();

<span class="comment">// clone the builder and take it with you</span>
<span class="kw">let</span> <span class="ident">not_logged_in</span> <span class="op">=</span> <span class="ident">builder</span>
    .<span class="ident">clone</span>()
    .<span class="ident">clear_header</span>::<span class="op">&lt;</span><span class="ident">Cookie</span><span class="op">&gt;</span>()
    .<span class="ident">connect_insecure</span>().<span class="ident">unwrap</span>();</pre>

<p>You may have noticed we&#39;re not using SSL, have no fear, SSL is included!
This crate&#39;s openssl dependency is optional (and included by default).
One can use <code>connect_secure</code> to connect to an SSL service, or simply <code>connect</code>
to choose either SSL or not based on the protocol (<code>ws://</code> or <code>wss://</code>).</p>
</div>
                    <h2 id='methods' class='small-section-header'>
                      Methods<a href='#methods' class='anchor'></a>
                    </h2>
                <h3 id='impl' class='impl'><span class='in-band'><code>impl&lt;'u&gt; <a class="struct" href="../../../websocket/client/builder/struct.ClientBuilder.html" title="struct websocket::client::builder::ClientBuilder">ClientBuilder</a>&lt;'u&gt;</code><a href='#impl' class='anchor'></a></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/websocket/client/builder.rs.html#112-944' title='goto source code'>[src]</a></span></h3>
<div class='impl-items'><h4 id='method.from_url' class="method"><span id='from_url.v' class='invisible'><code>pub fn <a href='#method.from_url' class='fnname'>from_url</a>(address: &amp;'u <a class="struct" href="../../../websocket/client/builder/struct.Url.html" title="struct websocket::client::builder::Url">Url</a>) -&gt; Self</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/websocket/client/builder.rs.html#128-130' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Create a client builder from an already parsed Url,
because there is no need to parse this will never error.</p>

<pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">websocket</span>::<span class="ident">url</span>::<span class="ident">Url</span>;

<span class="comment">// the parsing error will be handled outside the constructor</span>
<span class="kw">let</span> <span class="ident">url</span> <span class="op">=</span> <span class="ident">Url</span>::<span class="ident">parse</span>(<span class="string">&quot;ws://bitcoins.pizza&quot;</span>).<span class="ident">unwrap</span>();

<span class="kw">let</span> <span class="ident">builder</span> <span class="op">=</span> <span class="ident">ClientBuilder</span>::<span class="ident">from_url</span>(<span class="kw-2">&amp;</span><span class="ident">url</span>);</pre>

<p>The path of a URL is optional if no port is given then port
80 will be used in the case of <code>ws://</code> and port <code>443</code> will be
used in the case of <code>wss://</code>.</p>
</div><h4 id='method.new' class="method"><span id='new.v' class='invisible'><code>pub fn <a href='#method.new' class='fnname'>new</a>(address: &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;Self, <a class="enum" href="../../../websocket/client/builder/enum.ParseError.html" title="enum websocket::client::builder::ParseError">ParseError</a>&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/websocket/client/builder.rs.html#144-147' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Create a client builder from a URL string, this will
attempt to parse the URL immediately and return a <code>ParseError</code>
if the URL is invalid. URLs must be of the form:
<code>[ws or wss]://[domain]:[port]/[path]</code>
The path of a URL is optional if no port is given then port
80 will be used in the case of <code>ws://</code> and port <code>443</code> will be
used in the case of <code>wss://</code>.</p>

<pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">builder</span> <span class="op">=</span> <span class="ident">ClientBuilder</span>::<span class="ident">new</span>(<span class="string">&quot;wss://mycluster.club&quot;</span>);</pre>
</div><h4 id='method.add_protocol' class="method"><span id='add_protocol.v' class='invisible'><code>pub fn <a href='#method.add_protocol' class='fnname'>add_protocol</a>&lt;P&gt;(self, protocol: P) -&gt; Self <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;P: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>&gt;,&nbsp;</span></code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/websocket/client/builder.rs.html#171-179' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Adds a user-defined protocol to the handshake, the server will be
given a list of these protocols and will send back the ones it accepts.</p>

<pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">builder</span> <span class="op">=</span> <span class="ident">ClientBuilder</span>::<span class="ident">new</span>(<span class="string">&quot;wss://my-twitch-clone.rs&quot;</span>).<span class="ident">unwrap</span>()
    .<span class="ident">add_protocol</span>(<span class="string">&quot;my-chat-proto&quot;</span>);

<span class="kw">let</span> <span class="ident">protos</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="ident">builder</span>.<span class="ident">get_header</span>::<span class="op">&lt;</span><span class="ident">WebSocketProtocol</span><span class="op">&gt;</span>().<span class="ident">unwrap</span>().<span class="number">0</span>;
<span class="macro">assert</span><span class="macro">!</span>(<span class="ident">protos</span>.<span class="ident">contains</span>(<span class="kw-2">&amp;</span><span class="string">&quot;my-chat-proto&quot;</span>.<span class="ident">to_string</span>()));</pre>
</div><h4 id='method.add_protocols' class="method"><span id='add_protocols.v' class='invisible'><code>pub fn <a href='#method.add_protocols' class='fnname'>add_protocols</a>&lt;I, S&gt;(self, protocols: I) -&gt; Self <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;I: <a class="trait" href="https://doc.rust-lang.org/nightly/core/iter/traits/trait.IntoIterator.html" title="trait core::iter::traits::IntoIterator">IntoIterator</a>&lt;Item = S&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;S: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>&gt;,&nbsp;</span></code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/websocket/client/builder.rs.html#194-208' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Adds a user-defined protocols to the handshake.
This can take many kinds of iterators.</p>

<pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">builder</span> <span class="op">=</span> <span class="ident">ClientBuilder</span>::<span class="ident">new</span>(<span class="string">&quot;wss://my-twitch-clone.rs&quot;</span>).<span class="ident">unwrap</span>()
    .<span class="ident">add_protocols</span>(<span class="macro">vec</span><span class="macro">!</span>[<span class="string">&quot;pubsub&quot;</span>, <span class="string">&quot;sub.events&quot;</span>]);

<span class="kw">let</span> <span class="ident">protos</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="ident">builder</span>.<span class="ident">get_header</span>::<span class="op">&lt;</span><span class="ident">WebSocketProtocol</span><span class="op">&gt;</span>().<span class="ident">unwrap</span>().<span class="number">0</span>;
<span class="macro">assert</span><span class="macro">!</span>(<span class="ident">protos</span>.<span class="ident">contains</span>(<span class="kw-2">&amp;</span><span class="string">&quot;pubsub&quot;</span>.<span class="ident">to_string</span>()));
<span class="macro">assert</span><span class="macro">!</span>(<span class="ident">protos</span>.<span class="ident">contains</span>(<span class="kw-2">&amp;</span><span class="string">&quot;sub.events&quot;</span>.<span class="ident">to_string</span>()));</pre>
</div><h4 id='method.clear_protocols' class="method"><span id='clear_protocols.v' class='invisible'><code>pub fn <a href='#method.clear_protocols' class='fnname'>clear_protocols</a>(self) -&gt; Self</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/websocket/client/builder.rs.html#211-214' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Removes all the currently set protocols.</p>
</div><h4 id='method.add_extension' class="method"><span id='add_extension.v' class='invisible'><code>pub fn <a href='#method.add_extension' class='fnname'>add_extension</a>(self, extension: <a class="struct" href="../../../websocket/header/extensions/struct.Extension.html" title="struct websocket::header::extensions::Extension">Extension</a>) -&gt; Self</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/websocket/client/builder.rs.html#235-241' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Adds an extension to the connection.
Unlike protocols, extensions can be below the application level
(like compression). Currently no extensions are supported
out-of-the-box but one can still use them by using their own
implementation. Support is coming soon though.</p>

<pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">builder</span> <span class="op">=</span> <span class="ident">ClientBuilder</span>::<span class="ident">new</span>(<span class="string">&quot;wss://skype-for-linux-lol.com&quot;</span>).<span class="ident">unwrap</span>()
    .<span class="ident">add_extension</span>(<span class="ident">Extension</span> {
        <span class="ident">name</span>: <span class="string">&quot;permessage-deflate&quot;</span>.<span class="ident">to_string</span>(),
        <span class="ident">params</span>: <span class="macro">vec</span><span class="macro">!</span>[],
    });

<span class="kw">let</span> <span class="ident">exts</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="ident">builder</span>.<span class="ident">get_header</span>::<span class="op">&lt;</span><span class="ident">WebSocketExtensions</span><span class="op">&gt;</span>().<span class="ident">unwrap</span>().<span class="number">0</span>;
<span class="macro">assert</span><span class="macro">!</span>(<span class="ident">exts</span>.<span class="ident">first</span>().<span class="ident">unwrap</span>().<span class="ident">name</span> <span class="op">==</span> <span class="string">&quot;permessage-deflate&quot;</span>);</pre>
</div><h4 id='method.add_extensions' class="method"><span id='add_extensions.v' class='invisible'><code>pub fn <a href='#method.add_extensions' class='fnname'>add_extensions</a>&lt;I&gt;(self, extensions: I) -&gt; Self <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;I: <a class="trait" href="https://doc.rust-lang.org/nightly/core/iter/traits/trait.IntoIterator.html" title="trait core::iter::traits::IntoIterator">IntoIterator</a>&lt;Item = <a class="struct" href="../../../websocket/header/extensions/struct.Extension.html" title="struct websocket::header::extensions::Extension">Extension</a>&gt;,&nbsp;</span></code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/websocket/client/builder.rs.html#267-277' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Adds some extensions to the connection.
Currently no extensions are supported out-of-the-box but one can
still use them by using their own implementation. Support is coming soon though.</p>

<pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">builder</span> <span class="op">=</span> <span class="ident">ClientBuilder</span>::<span class="ident">new</span>(<span class="string">&quot;wss://moxie-chat.org&quot;</span>).<span class="ident">unwrap</span>()
    .<span class="ident">add_extensions</span>(<span class="macro">vec</span><span class="macro">!</span>[
        <span class="ident">Extension</span> {
            <span class="ident">name</span>: <span class="string">&quot;permessage-deflate&quot;</span>.<span class="ident">to_string</span>(),
            <span class="ident">params</span>: <span class="macro">vec</span><span class="macro">!</span>[],
        },
        <span class="ident">Extension</span> {
            <span class="ident">name</span>: <span class="string">&quot;crypt-omemo&quot;</span>.<span class="ident">to_string</span>(),
            <span class="ident">params</span>: <span class="macro">vec</span><span class="macro">!</span>[],
        },
    ]);
</pre>
</div><h4 id='method.clear_extensions' class="method"><span id='clear_extensions.v' class='invisible'><code>pub fn <a href='#method.clear_extensions' class='fnname'>clear_extensions</a>(self) -&gt; Self</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/websocket/client/builder.rs.html#280-283' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Remove all the extensions added to the builder.</p>
</div><h4 id='method.key' class="method"><span id='key.v' class='invisible'><code>pub fn <a href='#method.key' class='fnname'>key</a>(self, key: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.array.html">[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.array.html">; 16]</a>) -&gt; Self</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/websocket/client/builder.rs.html#288-292' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Add a custom <code>Sec-WebSocket-Key</code> header.
Use this only if you know what you&#39;re doing, and this almost
never has to be used.</p>
</div><h4 id='method.clear_key' class="method"><span id='clear_key.v' class='invisible'><code>pub fn <a href='#method.clear_key' class='fnname'>clear_key</a>(self) -&gt; Self</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/websocket/client/builder.rs.html#295-299' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Remove the currently set <code>Sec-WebSocket-Key</code> header if any.</p>
</div><h4 id='method.version' class="method"><span id='version.v' class='invisible'><code>pub fn <a href='#method.version' class='fnname'>version</a>(self, version: <a class="enum" href="../../../websocket/header/enum.WebSocketVersion.html" title="enum websocket::header::WebSocketVersion">WebSocketVersion</a>) -&gt; Self</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/websocket/client/builder.rs.html#305-309' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Set the version of the Websocket connection.
Currently this library only supports version 13 (from RFC6455),
but one could use this library to create the handshake then use an
implementation of another websocket version.</p>
</div><h4 id='method.clear_version' class="method"><span id='clear_version.v' class='invisible'><code>pub fn <a href='#method.clear_version' class='fnname'>clear_version</a>(self) -&gt; Self</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/websocket/client/builder.rs.html#312-316' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Unset the websocket version to be the default (WebSocket 13).</p>
</div><h4 id='method.origin' class="method"><span id='origin.v' class='invisible'><code>pub fn <a href='#method.origin' class='fnname'>origin</a>(self, origin: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>) -&gt; Self</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/websocket/client/builder.rs.html#322-325' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Sets the Origin header of the handshake.
Normally in browsers this is used to protect against
unauthorized cross-origin use of a WebSocket server, but it is rarely
send by non-browser clients. Still, it can be useful.</p>
</div><h4 id='method.clear_origin' class="method"><span id='clear_origin.v' class='invisible'><code>pub fn <a href='#method.clear_origin' class='fnname'>clear_origin</a>(self) -&gt; Self</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/websocket/client/builder.rs.html#328-331' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Remove the Origin header from the handshake.</p>
</div><h4 id='method.custom_headers' class="method"><span id='custom_headers.v' class='invisible'><code>pub fn <a href='#method.custom_headers' class='fnname'>custom_headers</a>(self, custom_headers: &amp;<a class="struct" href="../../../hyper/header/struct.Headers.html" title="struct hyper::header::Headers">Headers</a>) -&gt; Self</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/websocket/client/builder.rs.html#348-351' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>This is a catch all to add random headers to your handshake,
the process here is more manual.</p>

<pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">headers</span> <span class="op">=</span> <span class="ident">Headers</span>::<span class="ident">new</span>();
<span class="ident">headers</span>.<span class="ident">set</span>(<span class="ident">Authorization</span>(<span class="string">&quot;let me in&quot;</span>.<span class="ident">to_owned</span>()));

<span class="kw">let</span> <span class="ident">builder</span> <span class="op">=</span> <span class="ident">ClientBuilder</span>::<span class="ident">new</span>(<span class="string">&quot;ws://moz.illest&quot;</span>).<span class="ident">unwrap</span>()
    .<span class="ident">custom_headers</span>(<span class="kw-2">&amp;</span><span class="ident">headers</span>);
</pre>
</div><h4 id='method.clear_header' class="method"><span id='clear_header.v' class='invisible'><code>pub fn <a href='#method.clear_header' class='fnname'>clear_header</a>&lt;H&gt;(self) -&gt; Self <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;H: <a class="trait" href="../../../hyper/header/trait.Header.html" title="trait hyper::header::Header">Header</a> + <a class="trait" href="../../../hyper/header/trait.HeaderFormat.html" title="trait hyper::header::HeaderFormat">HeaderFormat</a>,&nbsp;</span></code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/websocket/client/builder.rs.html#355-360' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Remove a type of header from the handshake, this is to be used
with the catch all <code>custom_headers</code>.</p>
</div><h4 id='method.get_header' class="method"><span id='get_header.v' class='invisible'><code>pub fn <a href='#method.get_header' class='fnname'>get_header</a>&lt;H&gt;(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>H&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;H: <a class="trait" href="../../../hyper/header/trait.Header.html" title="trait hyper::header::Header">Header</a> + <a class="trait" href="../../../hyper/header/trait.HeaderFormat.html" title="trait hyper::header::HeaderFormat">HeaderFormat</a>,&nbsp;</span></code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/websocket/client/builder.rs.html#363-367' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Get a header to inspect it.</p>
</div><h4 id='method.connect' class="method"><span id='connect.v' class='invisible'><code>pub fn <a href='#method.connect' class='fnname'>connect</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;ssl_config: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../../native_tls/struct.TlsConnector.html" title="struct native_tls::TlsConnector">TlsConnector</a>&gt;<br>) -&gt; <a class="type" href="../../../websocket/result/type.WebSocketResult.html" title="type websocket::result::WebSocketResult">WebSocketResult</a>&lt;<a class="struct" href="../../../websocket/client/sync/struct.Client.html" title="struct websocket::client::sync::Client">Client</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="trait" href="../../../websocket/stream/sync/trait.NetworkStream.html" title="trait websocket::stream::sync::NetworkStream">NetworkStream</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>&gt;&gt;&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/websocket/client/builder.rs.html#389-403' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Connect to a server (finally)!
This will use a <code>Box&lt;NetworkStream&gt;</code> to represent either an SSL
connection or a normal TCP connection, what to use will be decided
using the protocol of the URL passed in (e.g. <code>ws://</code> or <code>wss://</code>)</p>

<p>If you have non-default SSL circumstances, you can use the <code>ssl_config</code>
parameter to configure those.</p>

<pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">client</span> <span class="op">=</span> <span class="ident">ClientBuilder</span>::<span class="ident">new</span>(<span class="string">&quot;wss://supersecret.l33t&quot;</span>).<span class="ident">unwrap</span>()
    .<span class="ident">connect</span>(<span class="prelude-val">None</span>)
    .<span class="ident">unwrap</span>();

<span class="comment">// send messages!</span>
<span class="kw">let</span> <span class="ident">message</span> <span class="op">=</span> <span class="ident">Message</span>::<span class="ident">text</span>(<span class="string">&quot;m337 47 7pm&quot;</span>);
<span class="ident">client</span>.<span class="ident">send_message</span>(<span class="kw-2">&amp;</span><span class="ident">message</span>).<span class="ident">unwrap</span>();</pre>
</div><h4 id='method.connect_insecure' class="method"><span id='connect_insecure.v' class='invisible'><code>pub fn <a href='#method.connect_insecure' class='fnname'>connect_insecure</a>(&amp;mut self) -&gt; <a class="type" href="../../../websocket/result/type.WebSocketResult.html" title="type websocket::result::WebSocketResult">WebSocketResult</a>&lt;<a class="struct" href="../../../websocket/client/sync/struct.Client.html" title="struct websocket::client::sync::Client">Client</a>&lt;<a class="struct" href="../../../websocket/stream/sync/struct.TcpStream.html" title="struct websocket::stream::sync::TcpStream">TcpStream</a>&gt;&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/websocket/client/builder.rs.html#420-424' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Create an insecure (plain TCP) connection to the client.
In this case no <code>Box</code> will be used, you will just get a TcpStream,
giving you the ability to split the stream into a reader and writer
(since SSL streams cannot be cloned).</p>

<pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">client</span> <span class="op">=</span> <span class="ident">ClientBuilder</span>::<span class="ident">new</span>(<span class="string">&quot;wss://supersecret.l33t&quot;</span>).<span class="ident">unwrap</span>()
    .<span class="ident">connect_insecure</span>()
    .<span class="ident">unwrap</span>();

<span class="comment">// split into two (for some reason)!</span>
<span class="kw">let</span> (<span class="ident">receiver</span>, <span class="ident">sender</span>) <span class="op">=</span> <span class="ident">client</span>.<span class="ident">split</span>().<span class="ident">unwrap</span>();</pre>
</div><h4 id='method.connect_secure' class="method"><span id='connect_secure.v' class='invisible'><code>pub fn <a href='#method.connect_secure' class='fnname'>connect_secure</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;ssl_config: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../../native_tls/struct.TlsConnector.html" title="struct native_tls::TlsConnector">TlsConnector</a>&gt;<br>) -&gt; <a class="type" href="../../../websocket/result/type.WebSocketResult.html" title="type websocket::result::WebSocketResult">WebSocketResult</a>&lt;<a class="struct" href="../../../websocket/client/sync/struct.Client.html" title="struct websocket::client::sync::Client">Client</a>&lt;<a class="struct" href="../../../websocket/stream/sync/struct.TlsStream.html" title="struct websocket::stream::sync::TlsStream">TlsStream</a>&lt;<a class="struct" href="../../../websocket/stream/sync/struct.TcpStream.html" title="struct websocket::stream::sync::TcpStream">TcpStream</a>&gt;&gt;&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/websocket/client/builder.rs.html#431-440' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Create an SSL connection to the sever.
This will only use an <code>TlsStream</code>, this is useful
when you want to be sure to connect over SSL or when you want access
to the <code>TlsStream</code> functions (without having to go through a <code>Box</code>).</p>
</div><h4 id='method.connect_on' class="method"><span id='connect_on.v' class='invisible'><code>pub fn <a href='#method.connect_on' class='fnname'>connect_on</a>&lt;S&gt;(&amp;mut self, stream: S) -&gt; <a class="type" href="../../../websocket/result/type.WebSocketResult.html" title="type websocket::result::WebSocketResult">WebSocketResult</a>&lt;<a class="struct" href="../../../websocket/client/sync/struct.Client.html" title="struct websocket::client::sync::Client">Client</a>&lt;S&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;S: <a class="trait" href="../../../websocket/stream/trait.Stream.html" title="trait websocket::stream::Stream">Stream</a>,&nbsp;</span></code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/websocket/client/builder.rs.html#472-488' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Connects to a websocket server on any stream you would like.
Possible streams:
 - Unix Sockets
 - Logging Middle-ware
 - SSH</p>

<pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">websocket</span>::<span class="ident">sync</span>::<span class="ident">stream</span>::<span class="ident">ReadWritePair</span>;
<span class="kw">use</span> <span class="ident">std</span>::<span class="ident">io</span>::<span class="ident">Cursor</span>;

<span class="kw">let</span> <span class="ident">accept</span> <span class="op">=</span> <span class="string">b&quot;HTTP/1.1 101 Switching Protocols\r
Upgrade: websocket\r
Connection: Upgrade\r
Sec-WebSocket-Accept: s3pPLMBiTxaQ9kYGzzhZRbK+xOo=\r
\r\n&quot;</span>;

<span class="kw">let</span> <span class="ident">input</span> <span class="op">=</span> <span class="ident">Cursor</span>::<span class="ident">new</span>(<span class="kw-2">&amp;</span><span class="ident">accept</span>[..]);
<span class="kw">let</span> <span class="ident">output</span> <span class="op">=</span> <span class="ident">Cursor</span>::<span class="ident">new</span>(<span class="ident">Vec</span>::<span class="ident">new</span>());

<span class="kw">let</span> <span class="ident">client</span> <span class="op">=</span> <span class="ident">ClientBuilder</span>::<span class="ident">new</span>(<span class="string">&quot;wss://test.ws&quot;</span>).<span class="ident">unwrap</span>()
    .<span class="ident">key</span>(<span class="string">b&quot;the sample nonce&quot;</span>.<span class="ident">clone</span>())
    .<span class="ident">connect_on</span>(<span class="ident">ReadWritePair</span>(<span class="ident">input</span>, <span class="ident">output</span>))
    .<span class="ident">unwrap</span>();

<span class="kw">let</span> <span class="ident">text</span> <span class="op">=</span> (<span class="ident">client</span>.<span class="ident">into_stream</span>().<span class="number">0</span>).<span class="number">1</span>.<span class="ident">into_inner</span>();
<span class="kw">let</span> <span class="ident">text</span> <span class="op">=</span> <span class="ident">String</span>::<span class="ident">from_utf8</span>(<span class="ident">text</span>).<span class="ident">unwrap</span>();
<span class="macro">assert</span><span class="macro">!</span>(<span class="ident">text</span>.<span class="ident">contains</span>(<span class="string">&quot;dGhlIHNhbXBsZSBub25jZQ==&quot;</span>), <span class="string">&quot;{}&quot;</span>, <span class="ident">text</span>);</pre>
</div><h4 id='method.async_connect' class="method"><span id='async_connect.v' class='invisible'><code>pub fn <a href='#method.async_connect' class='fnname'>async_connect</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;ssl_config: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../../native_tls/struct.TlsConnector.html" title="struct native_tls::TlsConnector">TlsConnector</a>&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;handle: &amp;<a class="struct" href="../../../websocket/async/struct.Handle.html" title="struct websocket::async::Handle">Handle</a><br>) -&gt; <a class="type" href="../../../websocket/client/async/type.ClientNew.html" title="type websocket::client::async::ClientNew">ClientNew</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="trait" href="../../../websocket/stream/async/trait.Stream.html" title="trait websocket::stream::async::Stream">Stream</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>&gt;&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/websocket/client/builder.rs.html#535-583' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Connect to a websocket server asynchronously.</p>

<p>This will use a <code>Box&lt;AsyncRead + AsyncWrite + Send&gt;</code> to represent either
 an SSL connection or a normal TCP connection, what to use will be decided
 using the protocol of the URL passed in (e.g. <code>ws://</code> or <code>wss://</code>)</p>

<p>If you have non-default SSL circumstances, you can use the <code>ssl_config</code>
 parameter to configure those.</p>

<h1 id='example' class='section-header'><a href='#example'>Example</a></h1>
<pre class="rust rust-example-rendered">
 <span class="kw">use</span> <span class="ident">websocket</span>::<span class="ident">ClientBuilder</span>;
 <span class="kw">use</span> <span class="ident">websocket</span>::<span class="ident">futures</span>::{<span class="ident">Future</span>, <span class="ident">Stream</span>, <span class="ident">Sink</span>};
 <span class="kw">use</span> <span class="ident">websocket</span>::<span class="ident">Message</span>;
 <span class="kw">use</span> <span class="ident">tokio_core</span>::<span class="ident">reactor</span>::<span class="ident">Core</span>;

 <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">core</span> <span class="op">=</span> <span class="ident">Core</span>::<span class="ident">new</span>().<span class="ident">unwrap</span>();

 <span class="comment">// let&#39;s randomly do either SSL or plaintext</span>
 <span class="kw">let</span> <span class="ident">url</span> <span class="op">=</span> <span class="kw">if</span> <span class="ident">rand</span>::<span class="ident">thread_rng</span>().<span class="ident">gen</span>() {
     <span class="string">&quot;ws://echo.websocket.org&quot;</span>
 } <span class="kw">else</span> {
     <span class="string">&quot;wss://echo.websocket.org&quot;</span>
 };

 <span class="comment">// send a message and hear it come back</span>
 <span class="kw">let</span> <span class="ident">echo_future</span> <span class="op">=</span> <span class="ident">ClientBuilder</span>::<span class="ident">new</span>(<span class="ident">url</span>).<span class="ident">unwrap</span>()
     .<span class="ident">async_connect</span>(<span class="prelude-val">None</span>, <span class="kw-2">&amp;</span><span class="ident">core</span>.<span class="ident">handle</span>())
     .<span class="ident">and_then</span>(<span class="op">|</span>(<span class="ident">s</span>, _)<span class="op">|</span> <span class="ident">s</span>.<span class="ident">send</span>(<span class="ident">Message</span>::<span class="ident">text</span>(<span class="string">&quot;hallo&quot;</span>).<span class="ident">into</span>()))
     .<span class="ident">and_then</span>(<span class="op">|</span><span class="ident">s</span><span class="op">|</span> <span class="ident">s</span>.<span class="ident">into_future</span>().<span class="ident">map_err</span>(<span class="op">|</span><span class="ident">e</span><span class="op">|</span> <span class="ident">e</span>.<span class="number">0</span>))
     .<span class="ident">map</span>(<span class="op">|</span>(<span class="ident">m</span>, _)<span class="op">|</span> {
         <span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">m</span>, <span class="prelude-val">Some</span>(<span class="ident">Message</span>::<span class="ident">text</span>(<span class="string">&quot;hallo&quot;</span>).<span class="ident">into</span>()))
     });

 <span class="ident">core</span>.<span class="ident">run</span>(<span class="ident">echo_future</span>).<span class="ident">unwrap</span>();</pre>
</div><h4 id='method.async_connect_secure' class="method"><span id='async_connect_secure.v' class='invisible'><code>pub fn <a href='#method.async_connect_secure' class='fnname'>async_connect_secure</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;ssl_config: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../../native_tls/struct.TlsConnector.html" title="struct native_tls::TlsConnector">TlsConnector</a>&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;handle: &amp;<a class="struct" href="../../../websocket/async/struct.Handle.html" title="struct websocket::async::Handle">Handle</a><br>) -&gt; <a class="type" href="../../../websocket/client/async/type.ClientNew.html" title="type websocket::client::async::ClientNew">ClientNew</a>&lt;<a class="struct" href="../../../websocket/client/async/struct.TlsStream.html" title="struct websocket::client::async::TlsStream">TlsStream</a>&lt;<a class="struct" href="../../../websocket/async/struct.TcpStream.html" title="struct websocket::async::TcpStream">TcpStream</a>&gt;&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/websocket/client/builder.rs.html#621-657' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Asynchronously create an SSL connection to a websocket sever.</p>

<p>This method will only try to connect over SSL and fail otherwise, useful
 when you want to be sure to connect over SSL or when you want access
 to the <code>TlsStream</code> functions (without having to go through a <code>Box</code>).</p>

<p>If you have non-default SSL circumstances, you can use the <code>ssl_config</code>
 parameter to configure those.</p>

<h1 id='example-1' class='section-header'><a href='#example-1'>Example</a></h1>
<pre class="rust rust-example-rendered">
 <span class="kw">use</span> <span class="ident">websocket</span>::<span class="ident">ClientBuilder</span>;
 <span class="kw">use</span> <span class="ident">websocket</span>::<span class="ident">futures</span>::{<span class="ident">Future</span>, <span class="ident">Stream</span>, <span class="ident">Sink</span>};
 <span class="kw">use</span> <span class="ident">websocket</span>::<span class="ident">Message</span>;
 <span class="kw">use</span> <span class="ident">tokio_core</span>::<span class="ident">reactor</span>::<span class="ident">Core</span>;

 <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">core</span> <span class="op">=</span> <span class="ident">Core</span>::<span class="ident">new</span>().<span class="ident">unwrap</span>();

 <span class="comment">// send a message and hear it come back</span>
 <span class="kw">let</span> <span class="ident">echo_future</span> <span class="op">=</span> <span class="ident">ClientBuilder</span>::<span class="ident">new</span>(<span class="string">&quot;wss://echo.websocket.org&quot;</span>).<span class="ident">unwrap</span>()
     .<span class="ident">async_connect_secure</span>(<span class="prelude-val">None</span>, <span class="kw-2">&amp;</span><span class="ident">core</span>.<span class="ident">handle</span>())
     .<span class="ident">and_then</span>(<span class="op">|</span>(<span class="ident">s</span>, _)<span class="op">|</span> <span class="ident">s</span>.<span class="ident">send</span>(<span class="ident">Message</span>::<span class="ident">text</span>(<span class="string">&quot;hallo&quot;</span>).<span class="ident">into</span>()))
     .<span class="ident">and_then</span>(<span class="op">|</span><span class="ident">s</span><span class="op">|</span> <span class="ident">s</span>.<span class="ident">into_future</span>().<span class="ident">map_err</span>(<span class="op">|</span><span class="ident">e</span><span class="op">|</span> <span class="ident">e</span>.<span class="number">0</span>))
     .<span class="ident">map</span>(<span class="op">|</span>(<span class="ident">m</span>, _)<span class="op">|</span> {
         <span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">m</span>, <span class="prelude-val">Some</span>(<span class="ident">Message</span>::<span class="ident">text</span>(<span class="string">&quot;hallo&quot;</span>).<span class="ident">into</span>()))
     });

 <span class="ident">core</span>.<span class="ident">run</span>(<span class="ident">echo_future</span>).<span class="ident">unwrap</span>();</pre>
</div><h4 id='method.async_connect_insecure' class="method"><span id='async_connect_insecure.v' class='invisible'><code>pub fn <a href='#method.async_connect_insecure' class='fnname'>async_connect_insecure</a>(self, handle: &amp;<a class="struct" href="../../../websocket/async/struct.Handle.html" title="struct websocket::async::Handle">Handle</a>) -&gt; <a class="type" href="../../../websocket/client/async/type.ClientNew.html" title="type websocket::client::async::ClientNew">ClientNew</a>&lt;<a class="struct" href="../../../websocket/async/struct.TcpStream.html" title="struct websocket::async::TcpStream">TcpStream</a>&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/websocket/client/builder.rs.html#693-711' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Asynchronously create an insecure (plain TCP) connection to the client.</p>

<p>In this case no <code>Box</code> will be used, you will just get a <code>TcpStream</code>,
 giving you less allocations on the heap and direct access to <code>TcpStream</code>
 functions.</p>

<h1 id='example-2' class='section-header'><a href='#example-2'>Example</a></h1>
<pre class="rust rust-example-rendered">
 <span class="kw">use</span> <span class="ident">websocket</span>::<span class="ident">ClientBuilder</span>;
 <span class="kw">use</span> <span class="ident">websocket</span>::<span class="ident">futures</span>::{<span class="ident">Future</span>, <span class="ident">Stream</span>, <span class="ident">Sink</span>};
 <span class="kw">use</span> <span class="ident">websocket</span>::<span class="ident">Message</span>;
 <span class="kw">use</span> <span class="ident">tokio_core</span>::<span class="ident">reactor</span>::<span class="ident">Core</span>;

 <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">core</span> <span class="op">=</span> <span class="ident">Core</span>::<span class="ident">new</span>().<span class="ident">unwrap</span>();

 <span class="comment">// send a message and hear it come back</span>
 <span class="kw">let</span> <span class="ident">echo_future</span> <span class="op">=</span> <span class="ident">ClientBuilder</span>::<span class="ident">new</span>(<span class="string">&quot;ws://echo.websocket.org&quot;</span>).<span class="ident">unwrap</span>()
     .<span class="ident">async_connect_insecure</span>(<span class="kw-2">&amp;</span><span class="ident">core</span>.<span class="ident">handle</span>())
     .<span class="ident">and_then</span>(<span class="op">|</span>(<span class="ident">s</span>, _)<span class="op">|</span> <span class="ident">s</span>.<span class="ident">send</span>(<span class="ident">Message</span>::<span class="ident">text</span>(<span class="string">&quot;hallo&quot;</span>).<span class="ident">into</span>()))
     .<span class="ident">and_then</span>(<span class="op">|</span><span class="ident">s</span><span class="op">|</span> <span class="ident">s</span>.<span class="ident">into_future</span>().<span class="ident">map_err</span>(<span class="op">|</span><span class="ident">e</span><span class="op">|</span> <span class="ident">e</span>.<span class="number">0</span>))
     .<span class="ident">map</span>(<span class="op">|</span>(<span class="ident">m</span>, _)<span class="op">|</span> {
         <span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">m</span>, <span class="prelude-val">Some</span>(<span class="ident">Message</span>::<span class="ident">text</span>(<span class="string">&quot;hallo&quot;</span>).<span class="ident">into</span>()))
     });

 <span class="ident">core</span>.<span class="ident">run</span>(<span class="ident">echo_future</span>).<span class="ident">unwrap</span>();</pre>
</div><h4 id='method.async_connect_on' class="method"><span id='async_connect_on.v' class='invisible'><code>pub fn <a href='#method.async_connect_on' class='fnname'>async_connect_on</a>&lt;S&gt;(self, stream: S) -&gt; <a class="type" href="../../../websocket/client/async/type.ClientNew.html" title="type websocket::client::async::ClientNew">ClientNew</a>&lt;S&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;S: <a class="trait" href="../../../websocket/stream/async/trait.Stream.html" title="trait websocket::stream::async::Stream">Stream</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'static,&nbsp;</span></code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/websocket/client/builder.rs.html#756-797' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Asynchronously connects to a websocket server on any stream you would like.
Possible streams:
 - Unix Sockets
 - Bluetooth
 - Logging Middle-ware
 - SSH</p>

<p>The stream must be <code>AsyncRead + AsyncWrite + Send + &#39;static</code>.</p>

<h1 id='example-3' class='section-header'><a href='#example-3'>Example</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">websocket</span>::<span class="ident">header</span>::<span class="ident">WebSocketProtocol</span>;
<span class="kw">use</span> <span class="ident">websocket</span>::<span class="ident">ClientBuilder</span>;
<span class="kw">use</span> <span class="ident">websocket</span>::<span class="ident">sync</span>::<span class="ident">stream</span>::<span class="ident">ReadWritePair</span>;
<span class="kw">use</span> <span class="ident">websocket</span>::<span class="ident">futures</span>::<span class="ident">Future</span>;
<span class="kw">use</span> <span class="ident">websocket</span>::<span class="ident">async</span>::<span class="ident">Core</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">core</span> <span class="op">=</span> <span class="ident">Core</span>::<span class="ident">new</span>().<span class="ident">unwrap</span>();

<span class="kw">let</span> <span class="ident">accept</span> <span class="op">=</span> <span class="string">b&quot;\
HTTP/1.1 101 Switching Protocols\r\n\
Upgrade: websocket\r\n\
Sec-WebSocket-Protocol: proto-metheus\r\n\
Connection: Upgrade\r\n\
Sec-WebSocket-Accept: s3pPLMBiTxaQ9kYGzzhZRbK+xOo=\r\n\
\r\n&quot;</span>;

<span class="kw">let</span> <span class="ident">input</span> <span class="op">=</span> <span class="ident">Cursor</span>::<span class="ident">new</span>(<span class="kw-2">&amp;</span><span class="ident">accept</span>[..]);
<span class="kw">let</span> <span class="ident">output</span> <span class="op">=</span> <span class="ident">Cursor</span>::<span class="ident">new</span>(<span class="ident">Vec</span>::<span class="ident">new</span>());

<span class="kw">let</span> <span class="ident">client</span> <span class="op">=</span> <span class="ident">ClientBuilder</span>::<span class="ident">new</span>(<span class="string">&quot;wss://test.ws&quot;</span>).<span class="ident">unwrap</span>()
    .<span class="ident">key</span>(<span class="string">b&quot;the sample nonce&quot;</span>.<span class="ident">clone</span>())
    .<span class="ident">async_connect_on</span>(<span class="ident">ReadWritePair</span>(<span class="ident">input</span>, <span class="ident">output</span>))
    .<span class="ident">map</span>(<span class="op">|</span>(_, <span class="ident">headers</span>)<span class="op">|</span> {
        <span class="kw">let</span> <span class="ident">proto</span>: <span class="kw-2">&amp;</span><span class="ident">WebSocketProtocol</span> <span class="op">=</span> <span class="ident">headers</span>.<span class="ident">get</span>().<span class="ident">unwrap</span>();
        <span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">proto</span>.<span class="number">0</span>.<span class="ident">first</span>().<span class="ident">unwrap</span>(), <span class="string">&quot;proto-metheus&quot;</span>)
    });

<span class="ident">core</span>.<span class="ident">run</span>(<span class="ident">client</span>).<span class="ident">unwrap</span>();</pre>
</div></div>
            <h2 id='implementations' class='small-section-header'>
              Trait Implementations<a href='#implementations' class='anchor'></a>
            </h2>
        <h3 id='impl-Clone' class='impl'><span class='in-band'><code>impl&lt;'u&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> for <a class="struct" href="../../../websocket/client/builder/struct.ClientBuilder.html" title="struct websocket::client::builder::ClientBuilder">ClientBuilder</a>&lt;'u&gt;</code><a href='#impl-Clone' class='anchor'></a></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/websocket/client/builder.rs.html#103' title='goto source code'>[src]</a></span></h3>
<div class='impl-items'><h4 id='method.clone' class="method"><span id='clone.v' class='invisible'><code>fn <a href='https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#tymethod.clone' class='fnname'>clone</a>(&amp;self) -&gt; <a class="struct" href="../../../websocket/client/builder/struct.ClientBuilder.html" title="struct websocket::client::builder::ClientBuilder">ClientBuilder</a>&lt;'u&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/websocket/client/builder.rs.html#103' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Returns a copy of the value. <a href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#tymethod.clone">Read more</a></p>
</div><h4 id='method.clone_from' class="method"><span id='clone_from.v' class='invisible'><code>fn <a href='https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#method.clone_from' class='fnname'>clone_from</a>(&amp;mut self, source: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>Self)</code></span><span class='out-of-band'><div class='ghost'></div><div class='since' title='Stable since Rust version 1.0.0'>1.0.0</div><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/clone.rs.html#112-114' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Performs copy-assignment from <code>source</code>. <a href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#method.clone_from">Read more</a></p>
</div></div><h3 id='impl-Debug' class='impl'><span class='in-band'><code>impl&lt;'u&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a> for <a class="struct" href="../../../websocket/client/builder/struct.ClientBuilder.html" title="struct websocket::client::builder::ClientBuilder">ClientBuilder</a>&lt;'u&gt;</code><a href='#impl-Debug' class='anchor'></a></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/websocket/client/builder.rs.html#103' title='goto source code'>[src]</a></span></h3>
<div class='impl-items'><h4 id='method.fmt' class="method"><span id='fmt.v' class='invisible'><code>fn <a href='https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#tymethod.fmt' class='fnname'>fmt</a>(&amp;self, __arg_0: &amp;mut <a class="struct" href="https://doc.rust-lang.org/nightly/core/fmt/struct.Formatter.html" title="struct core::fmt::Formatter">Formatter</a>) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/core/fmt/type.Result.html" title="type core::fmt::Result">Result</a></code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/websocket/client/builder.rs.html#103' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Formats the value using the given formatter. <a href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#tymethod.fmt">Read more</a></p>
</div></div></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>↑</dt>
                    <dd>Move up in search results</dd>
                    <dt>↓</dt>
                    <dd>Move down in search results</dd>
                    <dt>↹</dt>
                    <dd>Switch tab</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                    <dt style="width:31px;">+ / -</dt>
                    <dd>Collapse/expand all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../../../";
        window.currentCrate = "websocket";
    </script>
    <script src="../../../main.js"></script>
    <script defer src="../../../search-index.js"></script>
</body>
</html>